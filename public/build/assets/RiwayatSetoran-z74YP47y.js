import{r as n,q as k,j as e}from"./app-7FAViPwE.js";import{S as C}from"./SidebarDrawer-BFMvKwTU.js";function B(){const[p,v]=n.useState(null),{setoranList:i=[]}=k().props,[o,f]=n.useState(""),[r,j]=n.useState(1),[x,b]=n.useState("desc"),m=20,g=n.useMemo(()=>{if(!o)return i;const a=o.toLowerCase();return i.filter(s=>{var l,c;return(((c=(l=s.sampah)==null?void 0:l.nama_sampah)==null?void 0:c.toLowerCase())??"").includes(a)})},[o,i]),u=[...g].sort((a,s)=>{const t=new Date(a.tanggal),l=new Date(s.tanggal);return x==="asc"?t-l:l-t}).slice((r-1)*m,r*m),d=Math.ceil(g.length/m),h=a=>{a>=1&&a<=d&&j(a)},w=a=>new Intl.NumberFormat("id-ID").format(a),N=a=>{const s=new Date(a),t=String(s.getDate()).padStart(2,"0"),l=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getFullYear()).slice(2),y=String(s.getHours()).padStart(2,"0"),S=String(s.getMinutes()).padStart(2,"0");return`${t}/${l}/${c}, ${y}.${S}`};return e.jsxs("div",{className:"mx-auto w-full max-w-[500px] min-h-screen bg-white",children:[e.jsxs("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 max-w-[500px] w-full z-20 bg-main",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center px-4 py-2 bg-main",children:[e.jsx("div",{className:"flex flex-row items-center space-x-4",children:e.jsx("div",{className:"font-bold text-white text-lg",children:"Riwayat Setoran"})}),e.jsx(C,{})]}),e.jsx("div",{className:"sticky top-[44px] z-10 bg-white shadow px-4 py-3 border-b border-gray-200 shadow-lg",children:e.jsxs("div",{className:"flex space-x-4 items-center",children:[e.jsxs("div",{className:"flex-grow h-9 flex flex-row items-center justify-center pr-2 py-2 rounded-lg bg-neutral-100 border-2 border-gray-200",children:[e.jsx("input",{type:"text",placeholder:"Cari berdasarkan nama user atau jenis sampah...",value:o,onChange:a=>f(a.target.value),className:"bg-transparent border-none flex-grow focus:ring-0 focus:outline-none text-sm placeholder-gray-400"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.3",className:"w-5 h-5 text-main",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.505 4.505 0 0 1 9.5 14z"})})]}),e.jsx("button",{onClick:()=>b(x==="asc"?"desc":"asc"),className:"flex items-center space-x-2 text-sm text-gray-700 hover:text-main transition",children:x==="asc"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-main",children:[e.jsx("path",{d:"M6.75 2.25A.75.75 0 017.5 3v.75h9V3a.75.75 0 011.5 0v.75h.75A2.25 2.25 0 0121 6v12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18V6a2.25 2.25 0 012.25-2.25H6V3a.75.75 0 01.75-.75zM4.5 8.25v9.75a.75.75 0 00.75.75h13.5a.75.75 0 00.75-.75V8.25H4.5z"}),e.jsx("path",{fillRule:"evenodd",d:"M12 16a.75.75 0 01-.75-.75v-3.69l-1.22 1.22a.75.75 0 11-1.06-1.06l2.5-2.5a.75.75 0 011.06 0l2.5 2.5a.75.75 0 11-1.06 1.06l-1.22-1.22v3.69A.75.75 0 0112 16z",clipRule:"evenodd"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-main",children:[e.jsx("path",{d:"M6.75 2.25A.75.75 0 017.5 3v.75h9V3a.75.75 0 011.5 0v.75h.75A2.25 2.25 0 0121 6v12a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18V6a2.25 2.25 0 012.25-2.25H6V3a.75.75 0 01.75-.75zM4.5 8.25v9.75a.75.75 0 00.75.75h13.5a.75.75 0 00.75-.75V8.25H4.5z"}),e.jsx("path",{fillRule:"evenodd",d:"M12 12a.75.75 0 01.75.75v3.69l1.22-1.22a.75.75 0 111.06 1.06l-2.5 2.5a.75.75 0 01-1.06 0l-2.5-2.5a.75.75 0 111.06-1.06l1.22 1.22v-3.69A.75.75 0 0112 12z",clipRule:"evenodd"})]})})]})})]}),e.jsx("div",{className:"h-[140px]"}),e.jsx("div",{className:"px-4 grid grid-cols-1 gap-4",children:u.length>0?u.map(a=>{var s,t;return e.jsx("div",{className:"flex flex-col bg-white rounded-lg shadow p-4 space-y-3",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-max",children:e.jsx("div",{className:"w-24 h-24 rounded-lg bg-gray-100 flex items-center justify-center overflow-hidden",children:(s=a.sampah)!=null&&s.image?e.jsx("img",{src:`/storage/${a.sampah.image}`,alt:a.sampah.nama_sampah,className:"w-24 h-24 object-cover"}):e.jsx("div",{className:"text-xs text-gray-500",children:"No Image"})})}),e.jsxs("div",{className:"w-full flex flex-col space-y-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:`font-semibold text-base max-w-full break-words overflow-hidden transition-all duration-200 cursor-pointer ${p===a.id?"line-clamp-none":"line-clamp-2"}`,style:{wordWrap:"break-word",wordBreak:"break-word"},onClick:()=>v(p===a.id?null:a.id),children:(t=a.sampah)==null?void 0:t.nama_sampah}),e.jsxs("div",{className:"text-sm text-gray-700",children:["Berat: ",e.jsxs("span",{className:"font-medium",children:[w(a.berat_dalam_kg*1e3)," gram"]})]}),e.jsxs("div",{className:"text-sm text-main font-bold",children:["Poin: ",w(a.poin_diperoleh)]})]}),e.jsx("div",{className:"flex justify-end space-x-2 text-xs text-gray-600",children:e.jsxs("div",{className:"flex items-center space-x-1 bg-gray-100 px-1.5 py-0.5 rounded-full",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",className:"w-3.5 h-3.5",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10m2 0a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2m14 0v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"})}),e.jsx("span",{children:N(a.tanggal)})]})})]})]})},a.id)}):e.jsx("p",{className:"p-4 text-center text-gray-500",children:"Belum ada setoran."})}),d>1&&e.jsxs("div",{className:"flex justify-center space-x-2 pb-8",children:[e.jsx("button",{onClick:()=>h(r-1),disabled:r===1,className:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50",children:"Prev"}),[...Array(d).keys()].map(a=>{const s=a+1;return e.jsx("button",{onClick:()=>h(s),className:`px-3 py-1 rounded border ${r===s?"bg-main text-white":"border-gray-300"}`,children:s},s)}),e.jsx("button",{onClick:()=>h(r+1),disabled:r===d,className:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50",children:"Next"})]})]})}export{B as default};
