import{r as a,j as e}from"./app-BjWjYO3P.js";import{d as P}from"./index-B7b7j9SN.js";import{S as I}from"./SidebarDrawer-O-juI_GJ.js";function $({vouchers:p,user:b}){const[o,y]=a.useState(null),[N,d]=a.useState(null),[c,x]=a.useState(null),[g,w]=a.useState(null),[f,k]=a.useState(null),[r,z]=a.useState(""),[n,C]=a.useState("asc"),[l,S]=a.useState(1),m=20,j=a.useMemo(()=>{let s=p;return r.trim()!==""&&(s=s.filter(t=>t.nama.toLowerCase().includes(r.toLowerCase()))),s.sort((t,i)=>n==="asc"?t.nilai_poin-i.nilai_poin:i.nilai_poin-t.nilai_poin),s},[p,r,n]),h=Math.ceil(j.length/m),V=j.slice((l-1)*m,l*m),M=s=>{s.preventDefault(),P.Inertia.post("/penukaran/tukar",{voucher_id:N},{onError:t=>w(t),onSuccess:t=>{w(null),k(t.props.flash.message),d(null),x(null)}})},_=s=>{d(s.id),x(s)},v=()=>{d(null),x(null)},u=s=>{s>=1&&s<=h&&S(s)};return e.jsxs("div",{className:"mx-auto w-full max-w-[500px] min-h-screen bg-gray-100",children:[e.jsxs("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 max-w-[500px] w-full z-10 bg-main",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center px-4 py-2 bg-main",children:[e.jsx("div",{className:"flex flex-row items-center space-x-4",children:e.jsx("div",{className:"font-bold text-white text-lg",children:"Voucher"})}),e.jsx(I,{})]}),e.jsx("div",{className:"w-full h-max flex flex-col space-y-4 items-center justify-start p-4 bg-white shadow-lg",children:e.jsxs("div",{className:"w-full flex space-x-4",children:[e.jsxs("div",{className:"w-full h-9 flex flex-row mx-auto items-center justify-center pr-2 py-2 rounded-lg bg-neutral-100 border-2 border-gray-200",children:[e.jsx("input",{id:"searchInput",type:"text",className:"bg-transparent border-none flex-grow focus:ring-0 focus:outline-none placeholder-gray-400",placeholder:"Cari voucher",value:r,onChange:s=>z(s.target.value)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.3",className:"w-5 h-5 text-main",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.505 4.505 0 0 1 9.5 14z"})})]}),e.jsx("button",{onClick:()=>C(n==="asc"?"desc":"asc"),className:"flex flex-row space-x-2 items-center justify-center py-2",children:n==="asc"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-6 h-6 text-main",children:[e.jsx("path",{d:"M12.438 1.668V7H11.39V2.684h-.051l-1.211.859v-.969l1.262-.906h1.046z"}),e.jsx("path",{fillRule:"evenodd",d:"M11.36 14.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.835 1.973-1.835 1.09 0 2.063.636 2.063 2.687 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98"}),e.jsx("path",{d:"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-6 h-6 text-main",children:[e.jsx("path",{fillRule:"evenodd",d:"M11.36 7.098c-1.137 0-1.708-.657-1.762-1.278h1.004c.058.223.343.45.773.45.824 0 1.164-.829 1.133-1.856h-.059c-.148.39-.57.742-1.261.742-.91 0-1.72-.613-1.72-1.758 0-1.148.848-1.836 1.973-1.836 1.09 0 2.063.637 2.063 2.688 0 1.867-.723 2.848-2.145 2.848zm.062-2.735c.504 0 .933-.336.933-.972 0-.633-.398-1.008-.94-1.008-.52 0-.927.375-.927 1 0 .64.418.98.934.98"}),e.jsx("path",{d:"M12.438 8.668V14H11.39V9.684h-.051l-1.211.859v-.969l1.262-.906h1.046zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"}),"                "]})})]})})]}),e.jsx("div",{className:"h-[150px]"}),f&&e.jsx("div",{className:"text-green-600 text-center my-2",children:f}),g&&e.jsx("div",{className:"text-red-600 text-center my-2",children:Object.values(g).join(", ")}),e.jsx("div",{className:"px-4 grid grid-cols-1 gap-4 pb-8",children:V.map(s=>{const t=s.stok<=0||b.points<s.nilai_poin,i=s.stok<=0?"Tidak Tersedia":b.points<s.nilai_poin?"Poin Kurang":"Beli Voucher",L=t?"bg-gray-400":"bg-main";return e.jsxs("div",{className:"rounded-lg overflow-hidden shadow-md bg-white hover:shadow-lg transition",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.gambar?`/storage/${s.gambar}`:"/storage/logo_no_bg.png",alt:s.nama,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-3 left-3 bg-main text-white text-xs font-semibold py-1 px-3 rounded",children:s.kategori||"Voucher"}),s.stok<=0&&e.jsx("div",{className:"absolute bottom-3 left-3 bg-white text-red-600 text-xs font-semibold py-1 px-3 rounded-t",children:"Stok Habis"})]}),e.jsxs("div",{className:"p-4 pb-0",children:[e.jsxs("div",{onClick:()=>y(o===s.id?null:s.id),className:"cursor-pointer select-none",title:"Klik untuk selengkapnya",children:[e.jsx("h5",{className:`text-main text-lg font-bold mb-1 ${o===s.id?"break-words":"truncate"}`,children:s.nama}),e.jsx("div",{className:`text-gray-700 text-sm mb-2 transition-all duration-200 ease-in-out ${o===s.id?"break-words line-clamp-none":"line-clamp-2"}`,children:s.deskripsi})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 border-t py-3 ",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-yellow-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"w-4 h-4 text-yellow-500",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.5 4.002V12h1.283V9.164h1.668C10.033 9.164 11 8.08 11 6.586c0-1.482-.955-2.584-2.538-2.584zm2.77 4.072c.893 0 1.419-.545 1.419-1.488s-.526-1.482-1.42-1.482H6.778v2.97z"})}),e.jsxs("span",{className:"font-medium",children:[Number(s.nilai_poin).toLocaleString("id-ID")," Poin"]})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sky-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"w-4 h-4 text-sky-500",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h13A1.5 1.5 0 0 1 16 4.5V6a.5.5 0 0 1-.5.5 1.5 1.5 0 0 0 0 3 .5.5 0 0 1 .5.5v1.5a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 11.5V10a.5.5 0 0 1 .5-.5 1.5 1.5 0 1 0 0-3A.5.5 0 0 1 0 6zm4-1v1h1v-1zm1 3v-1H4v1zm7 0v-1h-1v1zm-1-2h1v-1h-1zm-6 3H4v1h1zm7 1v-1h-1v1zm-7 1H4v1h1zm7 1v-1h-1v1zm-8 1v1h1v-1zm7 1h1v-1h-1z"})}),e.jsxs("span",{children:["Stok: ",Number(s.stok).toLocaleString("id-ID")]})]})]})]}),e.jsx("div",{className:"flex border-t",children:e.jsx("button",{onClick:()=>_(s),disabled:t,className:`flex-1 text-center py-2 text-white text-sm font-medium ${L} ${t?"cursor-not-allowed":"hover:opacity-90"}`,children:i})})]},s.id)})}),e.jsxs("div",{className:"flex justify-center items-center space-x-3 mb-8",children:[e.jsx("button",{onClick:()=>u(l-1),disabled:l===1,className:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50",children:"Prev"}),[...Array(h)].map((s,t)=>e.jsx("button",{onClick:()=>u(t+1),className:`px-3 py-1 rounded border ${l===t+1?"bg-main text-white border-main":"border-gray-300"}`,children:t+1},t+1)),e.jsx("button",{onClick:()=>u(l+1),disabled:l===h,className:"px-3 py-1 rounded border border-gray-300 disabled:opacity-50",children:"Next"})]}),c&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40 backdrop-blur-sm animate-fadeIn",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto relative animate-slideUp",children:[e.jsx("button",{onClick:v,"aria-label":"Close modal",className:"absolute top-4 right-4 text-main_dark hover:text-main transition",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-6 h-6",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})}),e.jsx("h2",{className:"text-2xl font-semibold mb-5 text-center text-main_dark",children:"Konfirmasi Pembelian Voucher"}),e.jsxs("div",{className:"mb-6 text-center break-words px-4 border-b border-gray-300 pb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-main",children:c.nama}),e.jsx("p",{className:"text-gray-700 text-sm mt-1",children:c.deskripsi})]}),e.jsxs("form",{onSubmit:M,className:"flex justify-center space-x-4",children:[e.jsx("button",{type:"submit",className:"bg-main hover:bg-main_dark text-white px-6 py-2 rounded-md font-medium shadow-md transition",children:"Konfirmasi"}),e.jsx("button",{type:"button",onClick:v,className:"px-6 py-2 rounded-md border border-red-600 bg-red-500 text-white hover:bg-red-700 hover:border-red-700 transition font-medium shadow-md",children:"Batal"})]})]})})]})}export{$ as default};
