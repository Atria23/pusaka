import{r as l,q as k,j as e}from"./app-Bjso5RH5.js";import{S as C}from"./SidebarDrawer-mqXkU6GZ.js";function L({produkOlahan:p}){const[i,w]=l.useState(""),[n,f]=l.useState("asc"),[d,b]=l.useState(""),[r,x]=l.useState(1),[j,y]=l.useState(null),m=8,{kategoriSampah:N}=k().props,u=l.useMemo(()=>{let a=[...p];if(i.trim()!==""){const s=i.toLowerCase();a=a.filter(t=>t.nama_produk.toLowerCase().includes(s))}return d!==""&&(a=a.filter(s=>{var t;return((t=s.sampah)==null?void 0:t.nama_sampah)===d})),a.sort((s,t)=>{const o=s.nama_produk.toLowerCase(),v=t.nama_produk.toLowerCase();return o<v?n==="asc"?-1:1:o>v?n==="asc"?1:-1:0}),a},[p,i,n,d]),c=Math.ceil(u.length/m),g=u.slice((r-1)*m,r*m),h=a=>{a>=1&&a<=c&&x(a)};return e.jsxs("div",{className:"mx-auto w-full min-h-screen bg-main-white",children:[e.jsxs("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 w-full z-20 bg-main",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-center px-4 py-2 bg-main",children:[e.jsx("div",{className:"flex flex-row items-center space-x-4",children:e.jsx("div",{className:"font-bold text-white text-lg",children:"Galeri Produk Olahan"})}),e.jsx(C,{})]}),e.jsxs("div",{className:"sticky top-[44px] z-10 bg-white shadow px-4 py-3 border-b border-gray-200 shadow-lg",children:[e.jsxs("div",{className:"flex space-x-2 items-center",children:[e.jsxs("div",{className:"flex-grow h-9 flex items-center pr-2 py-2 rounded-lg bg-neutral-100 border-2 border-gray-200",children:[e.jsx("input",{type:"text",placeholder:"Cari nama produk...",value:i,onChange:a=>{w(a.target.value),x(1)},className:"bg-transparent border-none flex-grow text-sm placeholder-gray-400 focus:ring-0 focus:outline-none"}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-5 h-5 text-main",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 5 1.49-1.49-5-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14z"})})]}),e.jsxs("button",{onClick:()=>f(n==="asc"?"desc":"asc"),className:"text-sm text-gray-700 hover:text-main",children:[n==="asc"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-6 h-6 text-main",viewBox:"0 0 16 16",children:[e.jsx("path",{fillRule:"evenodd",d:"M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371zm1.57-.785L11 2.687h-.047l-.652 2.157z"}),e.jsx("path",{d:"M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",className:"w-6 h-6 text-main",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M12.96 7H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645z"}),e.jsx("path",{fillRule:"evenodd",d:"M10.082 12.629 9.664 14H8.598l1.789-5.332h1.234L13.402 14h-1.12l-.419-1.371zm1.57-.785L11 9.688h-.047l-.652 2.156z"}),e.jsx("path",{d:"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]}),"                "]})]}),e.jsxs("select",{value:d,onChange:a=>{b(a.target.value),x(1)},className:"w-full mt-2 px-3 py-1.5 border border-gray-300 rounded text-sm",children:[e.jsx("option",{value:"",children:"Semua Kategori"}),N.map(a=>e.jsx("option",{value:a.nama_sampah,children:a.nama_sampah},a.id))]})]})]}),e.jsx("div",{className:"h-[180px]"}),e.jsx("div",{className:"px-4 pb-8 space-y-4",children:g.length===0?e.jsx("div",{className:"text-center text-gray-600 mt-10",children:"Tidak ada produk ditemukan."}):g.map(a=>{var t,o;const s=j===a.id;return a.status,e.jsxs("div",{className:"rounded-lg overflow-hidden shadow-md bg-white",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.foto?`/storage/${a.foto}`:"/storage/logo_no_bg.png",alt:a.nama_produk,className:"w-full h-48 object-cover"}),e.jsx("div",{className:"absolute top-3 left-3 bg-main text-white text-xs font-semibold py-1 px-3 rounded",children:((t=a.sampah)==null?void 0:t.nama_sampah)||"Tanpa Kategori"})]}),e.jsxs("div",{className:"p-4 pb-2 cursor-pointer",onClick:()=>y(s?null:a.id),children:[e.jsx("h5",{className:`text-main text-lg font-bold mb-1 ${s?"break-words":"truncate"}`,children:a.nama_produk}),e.jsx("p",{className:`text-gray-700 text-sm mb-2 ${s?"break-words line-clamp-none":"line-clamp-2"}`,children:a.deskripsi||"Tidak ada deskripsi."}),e.jsx("hr",{className:"border-t border-gray-200 my-2"}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600 py-2",children:[e.jsx("div",{children:((o=a.link_pembelian)==null?void 0:o.trim())&&e.jsxs("a",{href:a.link_pembelian,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-green-500 text-white px-3 py-2 rounded-full text-xs font-semibold hover:bg-green-600 transition",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",class:"w-4 h-4 mr-2",viewBox:"0 0 16 16",children:e.jsx("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .491.592l-1.5 8A.5.5 0 0 1 13 12H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5M5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4m7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4m-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2m7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})}),"Beli Sekarang"]})}),e.jsx("div",{className:"text-sm text-gray-500",children:new Date(a.created_at).toLocaleString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]},a.id)})}),c>1&&e.jsxs("div",{className:"fixed bottom-0 left-1/2 -translate-x-1/2 w-full bg-white border-t border-gray-200 py-2 px-4 flex justify-center space-x-2",children:[e.jsx("button",{onClick:()=>h(r-1),disabled:r===1,className:"px-3 py-1 border rounded text-sm disabled:opacity-50",children:"Prev"}),[...Array(c).keys()].map(a=>{const s=a+1;return e.jsx("button",{onClick:()=>h(s),className:`px-3 py-1 rounded text-sm ${r===s?"bg-main text-white":"border"}`,children:s},s)}),e.jsx("button",{onClick:()=>h(r+1),disabled:r===c,className:"px-3 py-1 border rounded text-sm disabled:opacity-50",children:"Next"})]})]})}export{L as default};
