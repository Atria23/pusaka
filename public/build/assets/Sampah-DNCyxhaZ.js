import{W as z,r,j as e}from"./app-_odI_7Rx.js";import{d as v}from"./index-BFIU7UeR.js";function D({sampah:h}){const{data:t,setData:n,post:j,reset:x,processing:p}=z({id:null,nama_sampah:"",harga_per_kg:"",image:null}),[u,c]=r.useState(!1),[g,i]=r.useState(null),[f,o]=r.useState(!1),[w,N]=r.useState(null),[d,_]=r.useState(""),[m,y]=r.useState("asc"),b=r.useMemo(()=>{let a=h.data;return d.trim()!==""&&(a=a.filter(s=>s.nama_sampah.toLowerCase().includes(d.toLowerCase()))),a.sort((s,l)=>m==="asc"?s.nama_sampah.localeCompare(l.nama_sampah):l.nama_sampah.localeCompare(s.nama_sampah)),a},[h.data,d,m]),k=a=>{a.preventDefault();const s=new FormData;s.append("nama_sampah",t.nama_sampah),s.append("harga_per_kg",t.harga_per_kg),t.image&&s.append("image",t.image),u?(s.append("_method","PUT"),v.Inertia.post(route("admin.sampah.update",t.id),s,{preserveState:!0})):j(route("admin.sampah.store"),s,{preserveState:!0}),C()},C=()=>{x(),i(null),c(!1),o(!1)},S=a=>{n({id:a.id,nama_sampah:a.nama_sampah,harga_per_kg:a.harga_per_kg,image:null}),i(a.image?`/storage/${a.image}`:null),c(!0),o(!0)},L=()=>{x(),i(null),c(!1),o(!0)},M=a=>{const s=a.target.files[0];s&&(n("image",s),i(URL.createObjectURL(s)))};return e.jsxs("div",{className:"mx-auto w-full max-h-[892px] min-h-screen",children:[e.jsxs("div",{className:"fixed top-0 left-1/2 -translate-x-1/2 w-full z-10 bg-main",children:[e.jsxs("div",{className:"w-full h-max flex flex-row space-x-4 justify-start items-center px-4 py-2 bg-main",children:[e.jsxs("div",{className:"w-full h-max flex flex-row space-x-4 items-center justify-start",children:[e.jsx("button",{className:"shrink-0 w-6 h-6",onClick:()=>window.history.back(),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"white",className:"w-6 h-6",children:e.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),e.jsx("div",{className:"font-utama text-white font-bold text-lg",children:"Manajemen Sampah"})]}),e.jsx("button",{onClick:L,className:"flex items-center w-6 h-6",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6 text-white",children:[e.jsx("path",{d:"M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2m0 18a8 8 0 1 1 8-8 8.01 8.01 0 0 1-8 8"}),e.jsx("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4z"})]})})]}),f&&e.jsxs("form",{onSubmit:k,encType:"multipart/form-data",className:"mb-6 p-6 rounded-md shadow-md bg-putih border border-main_light",children:[e.jsx("input",{type:"text",placeholder:"Nama Sampah",value:t.nama_sampah,onChange:a=>n("nama_sampah",a.target.value),className:"border border-main_light rounded-md p-2 w-full mb-4 focus:outline-none focus:ring-2 focus:ring-main bg-main_white",required:!0}),e.jsx("input",{type:"text",placeholder:"Harga per kg",value:Number(t.harga_per_kg||0).toLocaleString("id-ID"),onChange:a=>{const s=a.target.value.replace(/\./g,""),l=parseInt(s,10);n("harga_per_kg",isNaN(l)?"":l)},className:"border border-main_light rounded-md p-2 w-full mb-4 focus:outline-none focus:ring-2 focus:ring-main bg-main_white",required:!0,inputMode:"numeric"}),e.jsxs("div",{className:"flex flex-row space-x-4 mb-4 items-center",children:[g&&e.jsx("img",{src:g,alt:"Preview",className:"w-16 h-16 rounded-xl object-cover"}),e.jsx("input",{type:"file",onChange:M,className:"border border-main_light rounded-md p-2 w-full mb-4 bg-main_white"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"submit",disabled:p,className:`px-5 py-2 rounded-md text-white font-semibold transition-colors ${p?"opacity-60 cursor-not-allowed":"bg-main hover:bg-main_dark"}`,children:u?"Update":"Tambah"}),e.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-5 py-2 rounded-md font-semibold border border-main_light text-main_dark hover:bg-main_light hover:text-main_white transition-colors",children:"Batal"})]})]}),e.jsx("div",{className:"w-full h-max flex flex-col space-y-4 items-center justify-start p-4 bg-white shadow-lg",children:e.jsxs("div",{className:"w-full flex space-x-4",children:[e.jsxs("div",{className:"w-full h-9 flex flex-row mx-auto items-center justify-center pr-2 py-2 rounded-lg bg-neutral-100 border-2 border-gray-200",children:[e.jsx("input",{id:"searchInput",type:"text",className:"bg-transparent border-none flex-grow focus:ring-0 focus:outline-none placeholder-gray-400",placeholder:"Cari nama sampah",value:d,onChange:a=>_(a.target.value)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.3",className:"w-5 h-5 text-main",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16a6.471 6.471 0 0 0 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM9.5 14A4.5 4.5 0 1 1 14 9.5 4.505 4.505 0 0 1 9.5 14z"})})]}),e.jsx("button",{onClick:()=>y(m==="asc"?"desc":"asc"),className:"flex flex-row space-x-2 items-center justify-center py-2",children:m==="asc"?e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-6 h-6 text-main",children:[e.jsx("path",{fillRule:"evenodd",d:"M10.082 5.629 9.664 7H8.598l1.789-5.332h1.234L13.402 7h-1.12l-.419-1.371zm1.57-.785L11 2.687h-.047l-.652 2.157z"}),e.jsx("path",{d:"M12.96 14H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645zM4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor",className:"w-6 h-6 text-main",children:[e.jsx("path",{d:"M12.96 7H9.028v-.691l2.579-3.72v-.054H9.098v-.867h3.785v.691l-2.567 3.72v.054h2.645z"}),e.jsx("path",{fillRule:"evenodd",d:"M10.082 12.629 9.664 14H8.598l1.789-5.332h1.234L13.402 14h-1.12l-.419-1.371zm1.57-.785L11 9.688h-.047l-.652 2.156z"}),e.jsx("path",{d:"M4.5 2.5a.5.5 0 0 0-1 0v9.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L4.5 12.293z"})]})})]})})]}),f&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mb-[300px]"})}),e.jsx("div",{className:"mb-4 min-h-[756px] pt-[113px] bg-white",children:e.jsx("div",{className:"mb-4 min-h-[756px] bg-white",children:b.length>0?b.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-4 border-b-2 border-b-neutral-100",children:[e.jsxs("div",{className:"w-full h-max flex items-center space-x-3 content-start",children:[e.jsx("div",{className:"w-14 aspect-square flex items-center justify-center p-1 rounded-xl bg-white shadow",children:e.jsx("img",{src:`/storage/${a.image}`,alt:a.nama_sampah,className:"w-full h-full object-cover rounded-lg"})}),e.jsxs("div",{className:"flex flex-col items-start space-y-1 cursor-pointer w-full",onClick:()=>N(w===a.id?null:a.id),children:[e.jsx("p",{className:`font-utama font-semibold text-sm text-gray-800 w-[13vw] ${w===a.id?"break-words":"truncate"}`,title:a.nama_sampah,children:a.nama_sampah}),e.jsxs("div",{className:"w-max h-max px-2 py-[2px] text-xs text-green-600 rounded-3xl bg-green-50 border border-green-600 flex items-center justify-center",children:["Rp",Number(a.harga_per_kg).toLocaleString("id-ID")]})]})]}),e.jsxs("div",{className:"w-max h-full flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>S(a),className:"w-full h-max px-2 py-[2px] text-xs text-main rounded-3xl bg-blue-50 border border-main flex items-center justify-center",children:"Edit"}),e.jsx("button",{onClick:()=>confirm("Hapus?")&&v.Inertia.delete(route("admin.sampah.destroy",a.id)),className:`w-full h-max px-2 py-[2px] text-xs rounded-3xl flex items-center justify-center 
                                                ${a.is_used?"text-yellow-600 bg-yellow-50 border border-yellow-600":"text-red-600 bg-red-50 border border-red-600"}`,children:"Hapus"})]})]},a.id)):e.jsx("p",{className:"p-4 text-center",children:"Data tidak ditemukan"})})})]})}export{D as default};
