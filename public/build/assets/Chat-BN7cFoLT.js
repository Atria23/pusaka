import{r as n,j as e}from"./app-CNMl6JWc.js";const x=({path:t,className:r=""})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,children:e.jsx("path",{d:t})});function y(){const[t,r]=n.useState(""),[u,l]=n.useState([]),[o,h]=n.useState(!1),i=n.useRef(null);n.useEffect(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[u,o]);const p=()=>{l([]),r("")},g=async s=>{var m;if(s.preventDefault(),!t.trim()||o)return;const c={sender:"user",text:t};l(a=>[...a,c]),h(!0);const b=t;r("");try{const a=await fetch("/chat/send",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"))||""},body:JSON.stringify({message:b})});if(!a.ok)throw new Error(`Server responded with status: ${a.status}`);const d={sender:"ai",text:(await a.json()).reply};l(j=>[...j,d])}catch(a){console.error("Failed to fetch AI reply:",a);const f={sender:"ai",text:"Maaf, terjadi kesalahan saat menghubungi server."};l(d=>[...d,f])}finally{h(!1)}};return e.jsxs("div",{className:"h-screen flex flex-col font-utama bg-gray-100",children:[e.jsxs("header",{className:"h-16 flex items-center justify-between px-4 bg-white border-b border-gray-200 shadow-sm",children:[e.jsxs("button",{onClick:()=>window.history.back(),className:"flex items-center space-x-2 text-gray-600 hover:text-main transition-colors p-2 rounded-lg",children:[e.jsx(x,{path:"M15 18l-6-6 6-6"}),e.jsx("span",{className:"font-medium",children:"Kembali"})]}),e.jsxs("button",{onClick:p,className:"flex items-center space-x-2 bg-[#4F8A75] text-white font-semibold py-2 px-4 rounded-lg hover:bg-[#2E5445] transition-colors",children:[e.jsx(x,{path:"M5 12h14 M12 5v14"}),e.jsx("span",{children:"Chat Baru"})]})]}),e.jsx("main",{className:"flex-1 overflow-y-auto px-4 py-6 md:px-12",children:e.jsxs("div",{ref:i,className:"max-w-3xl mx-auto space-y-8",children:[u.map((s,c)=>e.jsxs("div",{className:"flex items-start space-x-4",children:[s.sender==="ai"&&e.jsx("div",{className:"w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-full bg-[#EAF3EF] text-[#2E5445] font-bold",children:"TP"}),e.jsxs("div",{className:`p-4 rounded-lg max-w-xl shadow-sm ${s.sender==="user"?"ml-auto bg-[#4F8A75] text-white":"bg-white text-gray-800"}`,children:[e.jsx("p",{className:"font-semibold capitalize",children:s.sender==="user"?"You":"Tanya Pusaka"}),e.jsx("p",{className:"mt-1 whitespace-pre-wrap",children:s.text})]})]},c)),o&&e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-8 h-8 flex-shrink-0 flex items-center justify-center rounded-full bg-[#EAF3EF] text-[#2E5445] font-bold",children:"A"}),e.jsx("div",{className:"p-4 rounded-lg bg-white shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[e.jsx("span",{className:"h-2 w-2 bg-[#4F8A75] rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("span",{className:"h-2 w-2 bg-[#4F8A75] rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("span",{className:"h-2 w-2 bg-[#4F8A75] rounded-full animate-bounce"})]})})]})]})}),e.jsx("footer",{className:"h-24 px-4 py-4 md:px-12 bg-gray-100 border-t",children:e.jsx("form",{onSubmit:g,className:"max-w-3xl mx-auto h-full flex items-center",children:e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",value:t,onChange:s=>r(s.target.value),placeholder:"Ada pertanyaan?...",className:"w-full py-3 px-4 pr-12 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-2 focus:ring-[#4F8A75] transition"}),e.jsx("button",{type:"submit",disabled:o||!t.trim(),className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-[#4F8A75] text-white rounded-full hover:bg-[#2E5445] disabled:bg-[#7AB49A] disabled:cursor-not-allowed transition-colors",children:e.jsx(x,{path:"m22 2-7 20-4-9-9-4Z M22 2 11 13"})})]})})})]})}export{y as default};
